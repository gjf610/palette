{"version":3,"sources":["main.js"],"names":["m","data","isPainting","last","isTouchDevice","window","curColor","getPos","ev","scrollTop","document","documentElement","body","scrollLeft","x","pageX","y","pageY","v","canvas","getElementById","colorChoseDiv","querySelector","sizeBtn","sizeChoseDiv","ctx","init","width","clientWidth","height","clientHeight","getContext","fillStyle","strokeStyle","lineWidth","lineCap","draw","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","c","mousedown","e","mousemove","mouseup","touchstart","touches","clientX","clientY","touchmove","preventDefault","events","bindEvents","key","hasOwnProperty","value","onclick","closePad","classList","remove","openColorPad","add","cancelBubble","openSizePad","penEraser","openEraser","clearPalette","clearRect","setColor","backgroundColor","target","style","setWidth","widthNum","parseInt","slice","addEventListener"],"mappings":"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","file":"main.3de56314.js","sourceRoot":"..\\src","sourcesContent":["\r\nconst m = {\r\n    data: {\r\n        isPainting: false,\r\n        last: null,\r\n        isTouchDevice: 'ontouchstart' in window,\r\n        curColor: '',\r\n    },\r\n    getPos(ev) { //获取鼠标位置封装成函数\r\n        var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\r\n        var scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft;\r\n        return { x: ev.pageX + scrollLeft - 20, y: ev.pageY + scrollTop - 70 }; //JSON形式返回\r\n    }\r\n}\r\nconst v = {\r\n    canvas: document.getElementById('canvas'),\r\n    colorChoseDiv: document.querySelector('#penColorChose'),\r\n    sizeBtn: document.querySelector('#penSize'),\r\n    sizeChoseDiv: document.querySelector('#penSizeChose'),\r\n    ctx: null,\r\n    init() {\r\n        this.canvas.width = document.documentElement.clientWidth;\r\n        this.canvas.height = document.documentElement.clientHeight;\r\n        this.ctx = v.canvas.getContext('2d')\r\n        this.ctx.fillStyle = 'black';\r\n        this.ctx.strokeStyle = '#000';\r\n        this.ctx.lineWidth = 12;\r\n        this.ctx.lineCap = \"round\";\r\n    },\r\n    draw(x1, y1, x2, y2) {\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(x1, y1);\r\n        this.ctx.lineTo(x2, y2);\r\n        this.ctx.stroke();\r\n    }\r\n}\r\nconst c = {\r\n    mousedown: (e) => {\r\n        const { x, y } = m.getPos(e);\r\n        m.data.isPainting = true;\r\n        m.data.last = [x, y];\r\n    },\r\n    mousemove: (e) => {\r\n        const { x, y } = m.getPos(e);\r\n        if (m.data.isPainting) {\r\n            v.draw(m.data.last[0], m.data.last[1], x, y);\r\n            m.data.last = [x, y];\r\n        }\r\n    },\r\n    mouseup: () => {\r\n        m.data.isPainting = false\r\n    },\r\n    touchstart: (e) => {\r\n        const { clientX, clientY } = e.touches[0]\r\n        m.data.last = [clientX - 20, clientY - 70]\r\n    },\r\n    touchmove: (e) => {\r\n        e.preventDefault();\r\n        const { clientX, clientY } = e.touches[0]\r\n        v.draw(m.data.last[0], m.data.last[1], clientX - 20, clientY - 70);\r\n        m.data.last = [clientX - 20, clientY - 70]\r\n    },\r\n    events: {\r\n        \"body\": 'closePad',\r\n        \"#penColor\": 'openColorPad',\r\n        \"#penSize\": 'openSizePad',\r\n        \"#penEraser\": 'openEraser',\r\n        \"#penClear\": 'clearPalette',\r\n        \".colorRed\": 'setColor',\r\n        \".colorGreen\": 'setColor',\r\n        \".colorBlue\": 'setColor',\r\n        \".colorBlack\": 'setColor',\r\n        \".sSize\": 'setWidth',\r\n        \".mSize\": 'setWidth',\r\n        \".lSize\": 'setWidth',\r\n    },\r\n    bindEvents: () => {\r\n        for (let key in c.events) {\r\n            if (c.events.hasOwnProperty(key)) {\r\n                const value = c.events[key]\r\n                document.querySelector(key).onclick = c[value]\r\n            }\r\n        }\r\n    },\r\n    closePad: () => {\r\n        v.colorChoseDiv.classList.remove('planActive')\r\n        v.sizeChoseDiv.classList.remove('planActive')\r\n    },\r\n    openColorPad: (e) => {\r\n        v.colorChoseDiv.classList.add('planActive')\r\n        e.cancelBubble = true;\r\n    },\r\n    openSizePad: (e) => {\r\n        v.ctx.strokeStyle = m.curColor;\r\n        v.sizeBtn.classList.add('itemActive');\r\n        penEraser.classList.remove('itemActive');\r\n        v.sizeChoseDiv.classList.add('planActive');\r\n        e.cancelBubble = true;\r\n    },\r\n    openEraser: () => {\r\n        penEraser.classList.add('itemActive');\r\n        v.sizeBtn.classList.remove('itemActive');\r\n        v.ctx.strokeStyle = '#fff';\r\n    },\r\n    clearPalette: () => {\r\n        v.ctx.clearRect(0, 0, v.canvas.width, v.canvas.height);\r\n    },\r\n    setColor: (e) => {\r\n        const { backgroundColor } = e.target.style\r\n        v.ctx.strokeStyle = backgroundColor;\r\n        m.curColor = backgroundColor;\r\n    },\r\n    setWidth: (e) => {\r\n        const { width } = e.target.style\r\n        const widthNum = parseInt(width.slice(0, 2));\r\n        v.ctx.lineWidth = widthNum;\r\n    },\r\n    init() {\r\n        v.init()\r\n        m.curColor = v.ctx.strokeStyle\r\n        if (m.data.isTouchDevice) {\r\n            //触摸设备\r\n            v.canvas.addEventListener('touchstart', c.touchstart)\r\n            v.canvas.addEventListener('touchmove', c.touchmove)\r\n        } else {\r\n            //鼠标\r\n            v.canvas.addEventListener('mousedown', c.mousedown)\r\n            v.canvas.addEventListener('mousemove', c.mousemove)\r\n            v.canvas.addEventListener('mouseup', c.mouseup)\r\n        }\r\n        c.bindEvents()\r\n    }\r\n}\r\nc.init()\r\n"]}